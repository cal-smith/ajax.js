(function(window){"use strict";var ajax=function(){};function makeXHR(){if(!window.XMLHttpRequest){return new window.ActiveXObject("Microsoft.XMLHTTP")}else if(window.XMLHttpRequest){return new XMLHttpRequest}}ajax.prototype.send=function(args,callback){if(typeof args==="undefined"||typeof callback==="undefined"){throw"Missing arguments"}else{if(typeof args.json==="undefined"){args.json=false}if(typeof args.verb==="undefined"||!args.verb.match(/^(get|post|put|delete)$/i)){args.verb="get"}}if(typeof args.url_var!=="undefined"){var parts=args.url_var;args.url_var="?";for(var i=0;i<Object.keys(parts).length;i++){var k=Object.keys(parts)[i];var v=parts[Object.keys(parts)[i]];if(i===0){args.url_var+=encodeURI(k)+"="+encodeURI(v)}else{args.url_var+="&"+encodeURI(k)+"="+encodeURI(v)}}args.url+=args.url_var}var req=makeXHR();if(typeof args.progress!=="undefined"){req.addEventListener("progress",args.progress,false)}if(typeof args.progress!=="undefined"){req.addEventListener("error",args.error,false)}req.open(args.verb,args.url);if(typeof args.headers!=="undefined"){args.headers.forEach(function(value,key){req.setRequestHeader(key,value)})}req.onload=res;req.send();function res(){if(args.json===true){callback(JSON.parse(this.response),this.status)}else{callback(this.response,this.status)}}};var types=["get","post","put","delete"];for(var i=0;i<types.length;i++){ajax.prototype[types[i]]=function(args,callback){if(typeof args==="string"){args={url:args}}args.verb=types[i];return ajax.prototype.send(args,callback)}}ajax.prototype.getJSON=function(args,callback){if(typeof args==="string"){args={url:args}}args.verb="GET";args.json=true;return ajax.prototype.send(args,callback)};if(typeof window.ajax==="undefined"){window.ajax=new ajax}})(window);